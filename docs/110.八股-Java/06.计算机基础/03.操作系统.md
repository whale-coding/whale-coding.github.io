---
title: 操作系统
date: 
permalink: 
categories:
---

### 1.并发和并行的区别？

![并发和并行](https://blog-whalecoding.oss-cn-beijing.aliyuncs.com/picgo/20260122210054504.png)

:::center

并发和并行的区别

:::

:::note

-  并发是指一个处理器同时处理多个任务;并行是指多个处理器或者是多核的处理器同时处理多个不同的任务。  
- 并发是逻辑上的同时发生，而并行是物理上的同时发生。 打个比喻：并发是一个人同时吃三个馒头，而并行是三个人同时吃三个馒头。 

:::

### 2.进程和线程的区别？

:::note

- 进程是资源分配的最小单位，线程是CPU调度的最小单位
- 一个线程只能属于一个进程，而一个进程可以有多个线程
- 进程在执行过程中拥有独立的内存单元，而多个线程共享进程的内存
- 进程切换的开销远大于线程切换的开销

:::

### 3.什么是协程？

:::note

- 协程是一种由程序在用户态控制的，比线程更轻量级的并发执行单元
- 协程比线程更轻量，上下文切换开销小，一个进程可以包含多个协程
- 协程适用于需要大量并发任务但不需要操作系统介入的场景，比如异步IO

:::

>扩展面试题：**协程是操作系统层面的吗？**

:::danger NOTE

协程不是操作系统层面的，而是一种由程序在用户态控制的、比线程更轻量级的执行单元。它不被操作系统内核直接管理，而是在一个或多个线程内通过协作调度来运行。

:::

### 4.用户态和内核态的定义？

![aa7526f7-31e0-4f63-a908-66f4ec6378df](https://blog-whalecoding.oss-cn-beijing.aliyuncs.com/picgo/20260122210652143.png)

:::center

用户态和内核态

:::

:::note

在计算机系统中内存可以分为**内核空间**和**用户空间**。

- `内核空间`，是操作系统内核代码及其运行时数据结构所在的内存区域，拥有对系统所有资源的完全访问权限，如进程管理、内存管理、文件系统、网络堆栈等。
- `⽤户空间`，是操作系统为应用程序（如用户运行的进程）分配的内存区域，用户空间中的进程不能直接访问硬件或内核数据结构，只能通过系统调用与内核通信。

<mark>用户态</mark>是指**应用程序**运行时所处的状态，使用的是`用户空间`。

<mark>内核态</mark>是指操作系统内核运行时所处的状态，使用的是`内核空间`。

:::

>扩展面试题：**用户态和内核态是如何切换的？**

![8ac74208-fd53-4d0f-839e-cc3f674a9104](https://blog-whalecoding.oss-cn-beijing.aliyuncs.com/picgo/20260122211217272.png)

:::danger NOTE

切换的触发途径:

- **系统调用**: 应用程序主动请求内核服务，最常见.
- **硬件中断**: 外部设备（网卡、键盘）产生的中断信号，让 CPU 暂停当前任务，转去处理设备事件.
- **软件异常**: 程序错误（如除以零、访问非法内存）导致，触发 CPU 进入内核处理异常. 

:::

### 5.什么是进程上下文切换？

![4e93cb58-53c1-4ca8-8320-dabfd8d0613e](https://blog-whalecoding.oss-cn-beijing.aliyuncs.com/picgo/20260122211648582.png)

:::note

上下文切换是操作系统在多任务处理环境中，将 CPU 从一个进程切换到另一个进程的过程。通过让多个进程共享 CPU 资源，使系统能够并发执行多个任务。

:::

### 6.进程有哪些调度算法？

<div align="center">
  <img src="https://blog-whalecoding.oss-cn-beijing.aliyuncs.com/picgo/20260122211816800.png">
</div>

:::note

进程调度算法，常见的有：

- 先来先服务
- 短作业优先
- 优先级调度
- 时间片轮转
- 最短剩余时间优先
- 多级反馈队列

:::

### 7.进程间通信有哪些方式？线程间通信有哪些方式？

:::note

进程间通信的方式有 6 种方式：

- 管道
- 信号
- 消息队列
- 共享内存
- 信号量
- 套接字

线程间通信有3种方式：

- 锁机制
- 信号量机制
- 信号机制

:::

### 8.什么是死锁？死锁产生的条件？如何避免死锁？

#### 8.1 什么是死锁？

:::note

死锁是一种线程之间因争夺资源而发生的互相等待现象，导致所有相关线程都无法继续执行，陷入永久阻塞状态。

:::

#### 8.2 死锁产生的条件？

:::note

产生死锁需要同时满足四个必要条件：

- 互斥条件。资源一次只能被一个进程使用
- 持有并等待条件。一个进程已经持有了至少一个资源，同时还在等待获取其他被占用的资源
- 不可剥夺条件。已分配给进程的资源不能被强制剥夺，只有持有该资源的进程可以主动释放资源
- 循环等待条件。存在一个进程等待环

:::

#### 8.3 如何避免死锁？

:::note

避免死锁，也就是要破坏死锁的四个必要条件。

- 线程一次请求其所需要的所有资源，这样可以破坏请求并持有条件，避免死锁。
- 占用部分资源的线程进一步申请其他资源时，如果申请不到，可以主动释放它占有的资源，这样可以破坏不可剥夺条件，避免死锁。
- 按序进行申请资源，可以破坏循环等待条件，避免死锁。

:::

#### 8.4 操作系统怎么检查死锁？

:::note

在操作系统中，通过建立<mark>资源分配图</mark>，检测图中是否存在环路来实现死锁检测，若存在环路则可能发生死锁。

:::

#### 8.5 死锁问题怎么排查？

:::note

首先可以使用`top` 、`ps` 等命令查看进程状态，看看是否有进程占用了过多的资源。

然后可以使用JDK 自带的`jps -l` 查看当前进程，然后使用 `jstack 进程号` 查看当前进程的线程堆栈信息，看看是否有线程在等待锁资源。

:::

### 9.详细讲一讲 I/O 多路复用？



#### 9.2 select、poll、epoll的区别是什么？





### 虚拟地址空间的定义？

### 什么是总线？

### 守护线程和用户线程的区别？

### 为什么要有虚拟内存？有什么好处？

### 虚拟地址如何找到物理地址？

### 分页法和分段法有什么区别？
